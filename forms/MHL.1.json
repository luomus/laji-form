{
  "schema": {
    "type": "object",
    "properties": {
      "editors": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "title": "Muokkausoikeus"
      },
      "gatheringEvent": {
        "type": "object",
        "properties": {
          "namedPlaceNotes": {
            "type": "string",
            "title": "Reitin kuvaus (reitin yleinen kuvaus, esim. helppo-/vaikeakulkuisuus, vinkit tuleville laskijoille)"
          },
          "leg": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "title": "Laskijat"
          },
          "legPublic": {
            "type": "boolean",
            "title": "Laskijan nimi näkyy tuloksissa julkisena",
            "default": true
          },
          "dateBegin": {
            "type": "string",
            "title": "Laskentapäivä"
          },
          "timeStart": {
            "type": "string",
            "title": "Laskennan aloitusaika"
          },
          "timeEnd": {
            "type": "string",
            "title": "Laskennan lopetusaika"
          },
          "notes": {
            "type": "string",
            "title": "Lisätiedot laskennasta (esimerkiksi muutokset reittiin, huomiot säätilasta jne.)"
          },
          "gpsUsed": {
            "type": "boolean",
            "title": "GPS käytössä",
            "default": false
          },
          "breaksDuringCensusInMinutes": {
            "type": "integer",
            "minimum": 0,
            "title": "Pidettyjen taukojen määrä minuutteina"
          },
          "censusPrematurelyAborted": {
            "type": "boolean",
            "title": "Jäikö laskenta kesken?",
            "default": false
          },
          "censusHinderedByEnviromentalFactors": {
            "type": "boolean",
            "title": "Sääolot (tms) haittasivat",
            "default": false
          },
          "taxonCensus": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "censusTaxonID": {
                  "type": "string",
                  "title": "Laskettu taksoni"
                },
                "taxonCensusType": {
                  "type": "string",
                  "oneOf": [
                    {
                      "const": "MY.taxonCensusTypeCounted",
                      "title": "Määritetty ja laskettu yksilöt kaikista lajeista"
                    }
                  ],
                  "title": "Laskennan kattavuus",
                  "default": ""
                }
              },
              "required": [
                "taxonCensusType"
              ]
            },
            "title": "Kaikki havaitut nisäkkäät kirjattu",
            "default": [
              {
                "censusTaxonID": "MX.37580",
                "taxonCensusType": "MY.taxonCensusTypeCounted"
              }
            ]
          },
          "startDistanceFromNECorner": {
            "type": "string",
            "title": "Lähtöpisteen etäisyys reitin koillisnurkasta (m)"
          }
        },
        "required": [],
        "title": ""
      },
      "gatherings": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "habitatClassification": {
              "type": "string",
              "title": "Pääsaran biotooppi"
            },
            "timeStart": {
              "type": "string",
              "title": "Kellonaika"
            },
            "units": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "informalTaxonGroups": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "title": "Eliöryhmät"
                  },
                  "notes": {
                    "type": "string",
                    "title": "Lisätiedot"
                  },
                  "individualCount": {
                    "type": "integer",
                    "minimum": 0,
                    "title": "Yksilömäärä"
                  },
                  "identifications": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "taxon": {
                          "type": "string",
                          "title": "Laji"
                        }
                      },
                      "required": []
                    },
                    "minItems": 1,
                    "title": ""
                  },
                  "unitFact": {
                    "type": "object",
                    "properties": {
                      "autocompleteSelectedTaxonID": {
                        "type": "string",
                        "title": "Taxon ID selected from autocomplete"
                      },
                      "lineTransectObsType": {
                        "type": "string",
                        "oneOf": [
                          {
                            "const": "",
                            "title": ""
                          },
                          {
                            "const": "MY.lineTransectObsTypeSong",
                            "title": "Laulava"
                          },
                          {
                            "const": "MY.lineTransectObsTypeOtherSound",
                            "title": "Muuten ääntelevä"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeen",
                            "title": "Näköhavainto"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeenMale",
                            "title": "Koiras"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeenFemale",
                            "title": "Naaras"
                          },
                          {
                            "const": "MY.lineTransectObsTypeFlyingOverhead",
                            "title": "Ylilentävä"
                          },
                          {
                            "const": "MY.lineTransectObsTypeFlock",
                            "title": "Parvi"
                          },
                          {
                            "const": "MY.lineTransectObsTypeFlockFlyingOverhead",
                            "title": "Lentoparvi"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeenPair",
                            "title": "Pari"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeenBrood",
                            "title": "Poikue"
                          },
                          {
                            "const": "MY.lineTransectObsTypeSeenNest",
                            "title": "Pesä"
                          },
                          {
                            "const": "MY.lineTransectObsTypeUnknown",
                            "title": "Tuntematon"
                          }
                        ],
                        "title": "Havainnon laatu"
                      },
                      "lineTransectRouteFieldType": {
                        "type": "string",
                        "oneOf": [
                          {
                            "const": "",
                            "title": ""
                          },
                          {
                            "const": "MY.lineTransectRouteFieldTypeInner",
                            "title": "P - Pääsarka"
                          },
                          {
                            "const": "MY.lineTransectRouteFieldTypeOuter",
                            "title": "A - Apusarka"
                          }
                        ],
                        "title": "Sarka"
                      }
                    },
                    "required": [],
                    "title": ""
                  },
                  "shortHandText": {
                    "type": "string",
                    "title": "Pikasyöttö"
                  },
                  "pairCount": {
                    "type": "integer",
                    "minimum": 0,
                    "title": "Parimäärä",
                    "default": 1
                  },
                  "broodSize": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "title": "Pesuekoko"
                  },
                  "likelyMigrant": {
                    "type": "boolean",
                    "title": "Todennäköinen läpimuuttaja (ei pesi)"
                  },
                  "atlasCode": {
                    "type": "string",
                    "oneOf": [
                      {
                        "const": "",
                        "title": ""
                      },
                      {
                        "const": "MY.atlasCodeEnum1",
                        "title": "1 Epätodennäköinen pesintä: Havaittu pesimäaikaan lajin yksilö, mutta havainto ei viittaa pesintään kyseisessä atlasruudussa"
                      },
                      {
                        "const": "MY.atlasCodeEnum2",
                        "title": "2 Mahdollinen pesintä: Havaittu yksittäinen lintu kerran (esim. laulava tai soidinääntelevä koiras, nähty tai kuultu naaras) pesimäaikaan lajille sopivassa pesimäympäristössä, ja lajin pesintä ruudussa on mahdollista. Paikalla on joko käyty vain kerran tai lintu on tavattu vain kerran useista käynneistä huolimatta"
                      },
                      {
                        "const": "MY.atlasCodeEnum3",
                        "title": "3 Mahdollinen pesintä: havaittu pari kerran pesimäaikaan sopivassa pesimäympäristössä, ja lajin pesintä ruudussa on mahdollista"
                      },
                      {
                        "const": "MY.atlasCodeEnum4",
                        "title": "4 Todennäköinen pesintä: havaittu laulava, soidinmenoja esittävä tai muuten samalla paikalla (eli pysyvällä reviirillä) pesimäaikaan oleskeleva koiras eri päivinä"
                      },
                      {
                        "const": "MY.atlasCodeEnum5",
                        "title": "5 Todennäköinen pesintä: havaittu pesimäaikaan samalla paikalla oleskeleva naaras tai pari eri päivinä"
                      },
                      {
                        "const": "MY.atlasCodeEnum6",
                        "title": "6 Todennäköinen pesintä: havaittu lintu tai pari pesimäaikaan tavalla, joka viittaa vahvasti pesintään"
                      },
                      {
                        "const": "MY.atlasCodeEnum61",
                        "title": "61 Todennäköinen pesintä: lintu/pari käymässä useasti todennäköisellä pesäpaikalla (esim. laskeutuvan säännöllisesti samaan paikkaan ruoikkoon tai saareen)"
                      },
                      {
                        "const": "MY.atlasCodeEnum62",
                        "title": "62 Todennäköinen pesintä: lintu tai pari rakentamassa pesää (kaivamassa tai hakkaamassa pesäkoloa, kuljettamassa pesänrakennusmateriaalia, tms.)"
                      },
                      {
                        "const": "MY.atlasCodeEnum63",
                        "title": "63 Todennäköinen pesintä: lintu tai pari varoittelemassa, koska pesä tai poikue on ilmeisesti lähistöllä"
                      },
                      {
                        "const": "MY.atlasCodeEnum64",
                        "title": "64 Todennäköinen pesintä: lintu tai pari näyttelemässä siipirikkoa tai muulla tavoin houkuttelemassa havainnoijaa pois ilmeisen pesän tai poikueen luota"
                      },
                      {
                        "const": "MY.atlasCodeEnum65",
                        "title": "65 Todennäköinen pesintä: lintu tai pari hyökkäilemässä tai muulla tavoin käyttäytymässä uhkaavasti havainnoijaa kohtaan (esim. pöllöt ja tiirat), koska pesä tai poikue on ilmeisesti lähistöllä"
                      },
                      {
                        "const": "MY.atlasCodeEnum66",
                        "title": "66 Todennäköinen pesintä: nähty pesä, jossa on samanvuotista rakennusmateriaalia (esim. petolintujen koristellut pesät) tai ravintojätettä; ei kuitenkaan varmaa todistetta munista tai poikasista."
                      },
                      {
                        "const": "MY.atlasCodeEnum7",
                        "title": "7 Varma pesintä: havaittu epäsuora todiste varmasta pesinnästä."
                      },
                      {
                        "const": "MY.atlasCodeEnum71",
                        "title": "71 Varma pesintä: nähty pesä, jossa on pesitty samana vuonna, koska siinä on munia tai niiden kuoria, jätteitä poikasista, sulkatuppien ”hilsettä”, tms."
                      },
                      {
                        "const": "MY.atlasCodeEnum72",
                        "title": "72 Varma pesintä: havaittu linnun menevän pesään tai lähtevän pesästä tavalla, joka selvästi viittaa pesimiseen (ei kuitenkaan ole nähty munia, tai nähty tai kuultu poikasia; esim. koloihin tai korkealle pesivät lajit)."
                      },
                      {
                        "const": "MY.atlasCodeEnum73",
                        "title": "73 Varma pesintä: havaittu juuri lentokykyiset poikaset tai untuvikot, jotka voidaan katsoa syntyneiksi ruudun alueella."
                      },
                      {
                        "const": "MY.atlasCodeEnum74",
                        "title": "74 Varma pesintä: havaittu emo kantamassa tai kuljettamassa ruokaa poikasille tai poikasten ulosteita; pesän voidaan katsoa olevan ruudun alueella."
                      },
                      {
                        "const": "MY.atlasCodeEnum75",
                        "title": "75 Varma pesintä; Havaittu epäsuora todiste varmasta pesinnästä: nähty pesässä hautova emo"
                      },
                      {
                        "const": "MY.atlasCodeEnum8",
                        "title": "8 Varma pesintä: havaittu suora todiste varmasta pesinnästä."
                      },
                      {
                        "const": "MY.atlasCodeEnum81",
                        "title": "81 Varma pesintä: kuultu poikasten ääntelevän pesässä (esim. koloihin tai korkealle pesivät lajit)."
                      },
                      {
                        "const": "MY.atlasCodeEnum82",
                        "title": "82 Varma pesintä: nähty pesässä munia tai poikasia."
                      }
                    ],
                    "title": "Pesimävarmuusindeksi"
                  }
                },
                "required": [
                  "pairCount"
                ]
              },
              "title": "Havainnot"
            },
            "geometry": {
              "type": "object",
              "properties": {},
              "title": "Koordinaatit"
            },
            "gatheringFact": {
              "type": "object",
              "properties": {
                "lineTransectSegmentCounted": {
                  "type": "boolean",
                  "title": "Biotooppi laskettu",
                  "default": true
                },
                "lineTransectSegmentMetersStart": {
                  "type": "integer",
                  "minimum": 0,
                  "title": "Biotoopin alku metreissä linjan alusta"
                },
                "lineTransectSegmentMetersEnd": {
                  "type": "integer",
                  "minimum": 0,
                  "title": "Biotoopin loppu metreissä linjan alusta"
                }
              },
              "required": [],
              "title": ""
            },
            "taxonCensus": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "censusTaxonID": {
                    "type": "string",
                    "title": "Laskettu taksoni"
                  },
                  "taxonCensusType": {
                    "type": "string",
                    "oneOf": [
                      {
                        "const": "MY.taxonCensusTypeCounted",
                        "title": "Määritetty ja laskettu yksilöt kaikista lajeista"
                      }
                    ],
                    "title": "Laskennan kattavuus",
                    "default": ""
                  }
                },
                "required": [
                  "taxonCensusType"
                ]
              },
              "title": "Kaikki havaitut nisäkkäät kirjattu",
              "default": [
                {
                  "censusTaxonID": "MX.37580",
                  "taxonCensusType": "MY.taxonCensusTypeCounted"
                }
              ]
            }
          },
          "required": []
        },
        "title": ""
      }
    },
    "required": [
      "gatherings"
    ]
  },
  "excludeFromCopy": [
    "$.gatheringEvent.dateBegin",
    "$.gatheringEvent.timeStart",
    "$.gatheringEvent.timeEnd",
    "$.gatheringEvent.notes",
    "$.gatheringEvent.gpsUsed",
    "$.gatheringEvent.breaksDuringCensusInMinutes",
    "$.gatheringEvent.censusPrematurelyAborted",
    "$.gatheringEvent.censusHinderedByEnviromentalFactors",
    "$.gatheringEvent.taxonCensus",
    "$.gatherings[*].timeStart",
    "$.gatherings[*].units",
    "$.gatherings[*].taxonCensus"
  ],
  "name": "Linjalaskenta",
  "description": "Tämä on Luonnontieteellisen keskusmuseon Linnustonseurannan vakiolinjalaskentojen havaintojen ilmoitusjärjestelmä. Muiden linjojen kuin vakiolinjojen tulokset ilmoitetaan toistaiseksi tuttuun tapaan Excel-lomakkeella. Lisätietoa laskennoista ja laskentaohjeita löydät Linnustonseurannan sivuilta: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.luomus.fi/fi/pesimalintujen-linja-pistelaskenta\">https://www.luomus.fi/fi/pesimalintujen-linja-pistelaskenta</a><ol><li>Ilmoita lomakkeella laskennan ja reitin perustiedot sekä havaitut linnut biotoopeittain. Saat lisäohjeita ?-kuvakkeista kenttien vieressä.</li><li>Lomakkeella voit siirtyä kentästä toiseen joko hiiren avulla tai pikanäppäimillä (tab = seuraavaan kenttään, Alt + nuoli ylös = edelliselle havaintoriville, Alt + nuoli alas = seuraavalle havaintoriville).</li><li>Kirjaa havaitut linnut biotoopeittain. Voit valita biotooppipätkät joko kartalta klikkaamalla tai liikkua biotooppipätkästä toiseen nuolinäppäimillä havaintojensyötön yläpuolella. Kirjaa muuttuneet biotoopit ”pääsaran biotooppi” -kenttään.</li><li>Tee mahdolliset muutokset biotooppipätkien pituuteen tai reitin kulkuun kartan työkaluja käyttäen. Voit muokata linjan pistettä ensin tuplaklikkaamalla ja sitten raahaamalla. Pisteen voi poistaa klikkaamalla sitä hiiren oikealla näppäimellä. Jos teit virheen kartan muokkauksessa, käytä ”Kumoa”-työkalua kartan oikeasta reunasta. Seuraa kartalla kursorin viereen tulevia ohjetekstejä ja katso perusteellisempaa ohjetta Linjalaskentojen etusivun käyttöohjeesta.</li><li>Havaintoja voit syöttää joko ns. pikasyöttötilassa tai erillisten kenttien avulla. Pikasyöttötilaan ja siitä pois siirrytään havaintojensyötön oikean reunan nuolikuvakkeesta. Käytössä ovat 3+3 lyhenteet, tieteelliset ja suomenkieliset nimet sekä pikasyöttötilassa lisäksi yleisimpien lajien 2-kirjaimiset lyhenteet (linkki 2-kirjaimisiin lyhenteisiin: <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://tietopankki.luomus.fi/wp-content/uploads/2023/02/Linjalaskenta_kaksikirjaimiset_lajilyhenteet_Luomus.pdf\">https://tietopankki.luomus.fi/wp-content/uploads/2023/02/Linjalaskenta_kaksikirjaimiset_lajilyhenteet_Luomus.pdf</a>). Voit käyttää pieniä tai isoja kirjaimia ja käyttää välilyöntejä tai kirjoittaa kaiken yhteen. Katso ohjetta ”Havainnot”-kentän alla.</li><li>Kun olet syöttänyt havainnot, ja haluat tallentaa ja lähettää tiedot eteenpäin Linnustonseurannalle, paina: ”Tallenna julkisena”.</li><li>Tallennuksen jälkeen tulee näkyviin lista mahdollisista virheistä ja varoituksista. Korjaa virheet ja tallenna uudelleen.</li><li>Tallennuksen jälkeen näet koosteen tallentamastasi havaintoerästä, esimerkiksi havaituista lajeista ja parimääristä, pääsarkaprosentista, kokonaislajimäärästä, etenemisnopeudesta jne.</li><li>Pääset tarvittaessa muokkaamaan tallennettua havaintoerää ”Omat havaintoeräni” –kohdasta. Kunkin havaintoerän vasemmassa laidassa on valittavana ”Näytä havaintoerä” ja ”Siirry muokkaussivulle” -kuvakkeet.</li></ol>",
  "id": "MHL.1",
  "language": "fi",
  "title": "Maalintujen linjalaskennat",
  "shortTitle": "Linjalaskenta",
  "logo": "https://cdn.laji.fi/images/logos/linjalaskentalomake.PNG",
  "collectionID": "HR.61",
  "category": "MHL.categoryBirdMonitoringSchemes",
  "options": {
    "forms": [
      "MHL.27",
      "MHL.28"
    ],
    "about": {
      "fi": "2844",
      "sv": "2844",
      "en": "2844"
    },
    "resultServiceType": "MHL.resultServiceTypeLineTransect",
    "sidebarFormLabel": "Vakiolinjat ja ilmoittaminen",
    "season": {
      "start": "${year}-05-01",
      "end": "${year}-07-12"
    },
    "printType": "MHL.printTypeLineTransect",
    "viewerType": "MHL.viewerTypeLineTransect",
    "namedPlaceOptions": {
      "useLabel": "Ilmoita uusi laskenta tälle reitille",
      "startWithMap": true,
      "listLabel": "Linjaluettelo",
      "printLabel": "Katso ja tulosta kartta ja maastolomake",
      "reservationUntil": "${year}-12-31",
      "showLegendList": true,
      "infoFields": [
        "name",
        "notes"
      ],
      "useAcceptedDocument": true,
      "listColumns": [
        "$.alternativeIDs[0]",
        "$.name",
        "$._status",
        "$.prepopulatedDocument.gatheringEvent.dateBegin"
      ],
      "chooseDescription": "<p>Tämä on Luonnontieteellisen keskusmuseon Linnustonseurannan vakiolinjalaskentojen havaintojen ilmoitusjärjestelmä. Täällä voit tarkastella linjojen sijaintia ja tietoja, varata vakiolinjan, ilmoittaa laskennan havainnot ja tarkastella linjalaskentojen tuloksia. Lisätietoa laskennoista ja laskentaohjeita löydät Linnustonseurannan sivuilta: <a href=\"https://tietopankki.luomus.fi/linnustonseurannat/lintulaskennat-ja-seurannat\" target=\"_blank\" rel=\"noopener noreferref\">https://tietopankki.luomus.fi/linnustonseurannat/lintulaskennat-ja-seurannat/</a></p><p>Valitsemalla alla luettelosta tai kartalta vakiolinjan, voit:</p><ol><li>Tarkastella yleisiä reittien tietoja ja varaustilannetta.</li><li>Tehdä varauksen tulevalle kaudelle ja vapauttaa tekemäsi varauksen.</li><li>Katsoa ja tulostaa vakiolinjan kartan ja maastolomakkeen. Valitse vakiolinja, minkä jälkeen valitse oikeasta reunasta ”Katso ja tulosta kartta ja maastolomake”. Lomakkeita ei kannata tulostaa ennen linnustonseurannan lupaa, koska reittiin on voinut tulla hyväksymättömiä reittimuutoksia.</li><li>Tarkastella tunnuksellasi valitulta vakiolinjalta ilmoitettuja tuloksia.</li><li>Siirtyä ilmoittamaan havaintoja vakiolinjalta, jonka olet varannut. Valitse vakiolinja, minkä jälkeen klikkaa ”ilmoita uusi laskenta tälle reitille”.</ol><p>Jos sinulla on kysyttävää, ota yhteyttä <a target=\"_blank\" href=\"mailto:linnustonseuranta@helsinki.fi\">linnustonseuranta@helsinki.fi</a></p>",
      "copyLatestDocumentToNamedPlace": true,
      "filterByTags": true,
      "listColumnsMultisort": true,
      "includeDescendantCollections": false
    },
    "saveSuccessMessage": "Linjalaskennan havaintosi on nyt tallennettu. Kiitos osallistumisestasi! Jos sinulla on kysyttävää, ole yhteydessä linnustonseuranta@helsinki.fi",
    "useNamedPlaces": true,
    "restrictAccess": "MHL.restrictAccessLoose",
    "hasAdmins": true,
    "adminLockable": true,
    "warnEditingOldDocument": true,
    "strict": false
  },
  "uiSchema": {
    "ui:shortcuts": {
      "alt": {
        "fn": "help",
        "delay": 1
      },
      "alt+ ": {
        "fn": "navigate"
      },
      "alt+shift+ ": {
        "fn": "navigate",
        "reverse": true
      },
      "alt+PageDown": {
        "fn": "navigateArray",
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+PageUp": {
        "fn": "navigateArray",
        "reverse": true,
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+ArrowRight": {
        "fn": "navigateArray",
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+ArrowLeft": {
        "fn": "navigateArray",
        "reverse": true,
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+ArrowUp": {
        "fn": "navigateArray",
        "reverse": true,
        "target": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units",
        "targetLabel": "havaintoon"
      },
      "alt+ArrowDown": {
        "fn": "navigateArray",
        "target": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units",
        "targetLabel": "havaintoon"
      },
      "alt+h": {
        "fn": "navigateArray",
        "reverse": true,
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+j": {
        "fn": "navigateArray",
        "target": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units",
        "targetLabel": "havaintoon"
      },
      "alt+k": {
        "fn": "navigateArray",
        "reverse": true,
        "target": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units",
        "targetLabel": "havaintoon"
      },
      "alt+l": {
        "fn": "navigateArray",
        "target": "root_gatherings",
        "targetLabel": "väliin"
      },
      "alt+n": {
        "fn": "navigateArray"
      },
      "alt+p": {
        "fn": "navigateArray",
        "reverse": true
      },
      "alt+Insert": {
        "fn": "insert"
      },
      "alt+i": {
        "fn": "insert"
      },
      "alt+Delete": {
        "fn": "delete"
      },
      "alt+d": {
        "fn": "delete"
      },
      "alt+u": {
        "fn": "insert",
        "target": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units",
        "targetLabel": "havainto"
      },
      "alt+m": {
        "fn": "splitLineTransectByMeters",
        "target": "root_gatherings"
      },
      "alt+Enter": {
        "fn": "navigate"
      },
      "alt+shift+Enter": {
        "fn": "navigate",
        "reverse": true
      }
    },
    "ui:order": [
      "gatheringEvent",
      "gatherings"
    ],
    "ui:field": "InjectField",
    "ui:options": {
      "injections": {
        "fields": [
          "editors"
        ],
        "target": "gatheringEvent"
      }
    },
    "ui:annotations": {
      "formId": "MHL.21",
      "container": "modal",
      "adminOnly": true,
      "add": {
        "type": "MAN.typeOpinion"
      },
      "buttonsPath": "/gatheringEvent"
    },
    "gatheringEvent": {
      "ui:field": "NestField",
      "ui:classNames": "well well-sm",
      "ui:order": [
        "*",
        "legPublic",
        "eventTime",
        "censusPrematurelyAborted",
        "censusHinderedByEnviromentalFactors",
        "gpsUsed",
        "breaksDuringCensusInMinutes",
        "taxonCensus",
        "namedPlaceNotes",
        "notes"
      ],
      "ui:options": {
        "nests": {
          "legEditor": {
            "fields": [
              "leg",
              "editors"
            ],
            "rootUiSchema": {
              "ui:field": "NestField",
              "ui:options": {
                "nests": {
                  "_legEditor": {
                    "fields": [
                      "leg",
                      "editors"
                    ],
                    "title": "",
                    "rootUiSchema": {
                      "ui:functions": [
                        {
                          "ui:field": "DependentBooleanField",
                          "ui:options": {
                            "booleanField": "editors",
                            "booleanDefiner": "leg"
                          }
                        },
                        {
                          "ui:field": "ArrayCombinerField"
                        }
                      ],
                      "ui:field": "TableField",
                      "ui:options": {
                        "specialRules": "legEditors",
                        "ui:buttonsDesktopLayout": true,
                        "ui:deleteHelp": "Poista laskijan nimi",
                        "buttons": [
                          {
                            "fn": "add",
                            "label": "Lisää laskija"
                          }
                        ]
                      },
                      "items": {
                        "ui:functions": {
                          "ui:field": "ContextInjectionField",
                          "ui:options": {
                            "injections": {
                              "/ui:options/rules/0/regexp": "^%{/creator}$"
                            }
                          }
                        },
                        "ui:field": "DependentDisableField",
                        "ui:options": {
                          "rules": [
                            {
                              "disableDefiner": "leg",
                              "disableField": "editors",
                              "regexp": "creator is injected here",
                              "inlineHelp": "Sinulla täytyy olla muokkausoikeus.",
                              "disabledValueToDisplay": true
                            },
                            {
                              "disableDefiner": "leg",
                              "disableField": "editors",
                              "regexp": "^((?!(MA\\.\\d)).)*$"
                            }
                          ]
                        }
                      }
                    }
                  },
                  "legEditorSizeFixer": {
                    "fields": [
                      "_legEditor"
                    ],
                    "title": "",
                    "rootUiSchema": {
                      "ui:grid": {
                        "lg": 6,
                        "md": 6,
                        "sm": 9,
                        "xs": 12
                      }
                    }
                  }
                }
              }
            }
          },
          "eventTime": {
            "fields": [
              "dateBegin",
              "timeStart",
              "timeEnd"
            ],
            "title": "",
            "rootUiSchema": {
              "ui:grid": {
                "rows": [
                  [
                    "dateBegin",
                    "timeStart",
                    "timeEnd"
                  ]
                ],
                "lg": {
                  "dateBegin": 3,
                  "timeStart": 2,
                  "timeEnd": 2
                },
                "md": {
                  "dateBegin": 4,
                  "timeStart": 2,
                  "timeEnd": 2
                },
                "sm": {
                  "dateBegin": 5,
                  "timeStart": 3,
                  "timeEnd": 3
                },
                "xs": 12
              }
            }
          }
        }
      },
      "namedPlaceNotes": {
        "ui:widget": "textarea",
        "ui:options": {
          "rows": 3
        },
        "ui:help": "Kirjaa tähän pysyviä reittiin liittyviä seikkoja"
      },
      "dateBegin": {
        "ui:widget": "DateWidget",
        "ui:options": {
          "showButtons": true
        }
      },
      "timeStart": {
        "ui:widget": "TimeWidget",
        "ui:options": {
          "showTimeList": false
        }
      },
      "timeEnd": {
        "ui:widget": "TimeWidget",
        "ui:options": {
          "showTimeList": false
        }
      },
      "leg": {
        "ui:widget": "AutosuggestWidget",
        "ui:help": "Laskijan nimi, muodossa: etunimi sukunimi",
        "ui:options": {
          "autosuggestField": "friends",
          "allowNonsuggestedValue": true,
          "suggestionReceive": "key",
          "preventTypingPattern": "^MA\\.\\d+$"
        }
      },
      "legPublic": {
        "ui:options": {
          "allowUndefined": false
        },
        "ui:help": "Tarvittaessa voit piilottaa havainnoijien nimet avoimesta aineistosta valitsemalla \"Ei\"-vaihtoehdon. Havainnoijien nimet ovat aina viranomaisten käytettävissä."
      },
      "gpsUsed": {
        "ui:options": {
          "allowUndefined": false
        }
      },
      "censusPrematurelyAborted": {
        "ui:options": {
          "allowUndefined": false
        },
        "ui:help": "Valitse <i>Kyllä</i> jos linjan laskenta jäi kesken. Merkitse tällöin laskematta jääneet biotooppipätkiin <i>Biotooppi laskettu</i> -kenttään <i>Ei</i>"
      },
      "censusHinderedByEnviromentalFactors": {
        "ui:options": {
          "allowUndefined": false
        },
        "ui:help": "Valitse <i>Kyllä</i> jos arvioit että sää haittasi lintujen aktiivisuutta tai niiden havaitsemista"
      },
      "breaksDuringCensusInMinutes": {
        "ui:help": "Jos pidit taukoja, esim. isommat kierrot tms. arvioi pituus karkeasti"
      },
      "notes": {
        "ui:widget": "textarea",
        "ui:options": {
          "rows": 2
        },
        "ui:help": "Ilmoitettavaa laskentakertaa koskevat huomiot. Pysyvät muutokset ja vinkit kirjoitetaan kenttään: ”Reitin kuvaus”."
      },
      "taxonCensus": {
        "ui:field": "AnyToBooleanField",
        "ui:help": "Valitse <i>Kyllä</i>, vaikka et olisi havainnut yhtään nisäkästä",
        "ui:options": {
          "allowUndefined": false,
          "trueValue": [
            {
              "censusTaxonID": "MX.37580",
              "taxonCensusType": "MY.taxonCensusTypeCounted"
            },
            {
              "censusTaxonID": "MX.37612",
              "taxonCensusType": "MY.taxonCensusTypeCounted"
            }
          ],
          "falseValue": [
            {
              "censusTaxonID": "MX.37580",
              "taxonCensusType": "MY.taxonCensusTypeCounted"
            }
          ]
        }
      },
      "startDistanceFromNECorner": {
        "ui:field": "HiddenField"
      }
    },
    "editors": {
      "ui:help": "Jos lisäät tälle lomakkeelle uuden havainnoijan, joka on profiilissasi luokiteltu kaveriksesi, voit antaa hänelle oikeuden muokata retkikertomusta. Muokkausoikeuden haltijoille kaikki lomakkeeseen tallennetut havainnot näkyvät myös heidän omina havaintoinaan.",
      "ui:options": {
        "allowUndefined": false
      }
    },
    "gatherings": {
      "ui:functions": {
        "ui:field": "MapArrayField",
        "ui:settings": [
          "/mapOptions/tileLayerName",
          "/mapOptions/overlayNames",
          "/mapOptions/tileLayerOpacity",
          "/mapOptions/tileLayers"
        ],
        "ui:options": {
          "geometryField": "geometry",
          "geometryMapper": "lineTransect",
          "mapSizes": {
            "lg": 4,
            "md": 4,
            "sm": 6,
            "xs": 6
          },
          "mapOptions": {
            "tileLayerName": "maastokartta",
            "controls": {
              "location": false
            },
            "tileLayerOpacity": 0.5
          },
          "idToFocusAfterNavigate": "root_gatherings_%{context[\"root_gatherings.activeIdx\"]}_units_0",
          "activeIdx": 0
        }
      },
      "ui:field": "SingleActiveArrayField",
      "ui:title": "Biotooppipätkä",
      "ui:help": "Valitse seuraava/edellinen biotooppipätkä joko sivulla olevista nuolista tai kartasta klikkaamalla",
      "ui:options": {
        "renderer": "pager",
        "affixed": true,
        "headerClassName": "darker-bottom-border",
        "canAdd": false,
        "removable": false,
        "headerFormatters": [
          "lineTransect"
        ]
      },
      "items": {
        "ui:field": "NestField",
        "ui:options": {
          "nests": {
            "placeWrapper": {
              "fields": [
                "gatheringFact",
                "habitatClassification",
                "timeStart",
                "geometry"
              ],
              "rootUiSchema": {
                "ui:order": [
                  "*",
                  "gatheringFact"
                ],
                "ui:grid": {
                  "rows": [
                    [
                      "habitatClassification",
                      "timeStart",
                      "gatheringFact"
                    ]
                  ],
                  "lg": {
                    "habitatClassification": 4,
                    "*": 2
                  },
                  "md": {
                    "habitatClassification": 4,
                    "*": 2
                  },
                  "sm": {
                    "habitatClassification": 6,
                    "timeStart": 3,
                    "gatheringFact": 3
                  },
                  "xs": 12
                }
              }
            }
          }
        },
        "ui:order": [
          "*",
          "units"
        ],
        "habitatClassification": {
          "ui:help": "<u>Biotoopin koodi</u> on kolmiosainen. Alun <b>ISO</b> kirjain kertoo biotoopin ja seuraava numero tai <b>ISO</b> kirjain tarkentaa sitä. Niiden perään merkitään metsäisillä biotoopeilla puuston keskikorkeus ja aukeilla biotoopeilla aukean kokoluokka. <a href=\"https://www.luomus.fi/sites/default/files/files/linjalomake-e.pdf\" target=\"_blank\" rel=\"noreferrer\">Tarkemmat ohjeet</a>",
          "ui:helpHoverable": true,
          "ui:widget": "UpperCaseWidget"
        },
        "timeStart": {
          "ui:widget": "TimeWidget",
          "ui:help": "Biotooppipätkän aloitusaika. Raportoidaan noin 500 m välein. Laita 500m (maastolomakkeen sivun vaihto) väliaika lähimpään biotoopin aloitukseen. Jos biotooppipätkän alkua ei satu lähelle 500m vaihtumista, arvioi tarvittaessa ero.",
          "ui:options": {
            "showTimeList": false
          }
        },
        "geometry": {
          "ui:field": "HiddenField"
        },
        "gatheringFact": {
          "lineTransectSegmentCounted": {
            "ui:options": {
              "allowUndefined": false
            },
            "ui:help": "Jos jouduit jättämään laskennan syystä tai toisesta väliin kyseisellä biotooppipätkällä, valitse <i>Ei</i>"
          },
          "lineTransectSegmentMetersStart": {
            "ui:field": "HiddenField"
          },
          "lineTransectSegmentMetersEnd": {
            "ui:field": "HiddenField"
          }
        },
        "units": {
          "ui:field": "AutoArrayField",
          "ui:options": {
            "orderable": true,
            "confirmDelete": true,
            "deleteCorner": true,
            "canAdd": false
          },
          "ui:help": "Syötä havainto pikasyöttökoodein ja paina Enter, jolloin havainto puretaan automaattisesti erillisiin kenttiin",
          "items": {
            "ui:functions": [
              {
                "ui:field": "ContextInjectionField",
                "ui:options": {
                  "injections": {
                    "/ui:options/formID": "/formID"
                  }
                }
              },
              {
                "ui:field": "UnitShorthandField",
                "ui:classNames": "well well-sm darker slim",
                "ui:options": {
                  "shorthandField": "shortHandText",
                  "injectButtons": true,
                  "autofocus": true
                }
              },
              {
                "ui:field": "FlatField",
                "ui:options": {
                  "fields": [
                    "identifications",
                    "unitFact"
                  ]
                }
              },
              {
                "ui:field": "AutosuggestField",
                "ui:options": {
                  "autosuggestField": "taxon",
                  "allowNonsuggestedValue": true,
                  "suggestionInputField": "identifications_0_taxon",
                  "suggestionValueField": "unitFact_autocompleteSelectedTaxonID",
                  "suggestionReceivers": {
                    "identifications_0_taxon": "/payload/scientificName",
                    "informalTaxonGroups": "$taxonGroup",
                    "unitFact_autocompleteSelectedTaxonID": "key"
                  },
                  "inputTransformer": {
                    "regexp": "^(.*)\\?$",
                    "transformations": {
                      "taxonConfidence": "MY.taxonConfidenceUnsure"
                    }
                  },
                  "query": {
                    "informalTaxonGroup": "MVL.1,MVL.2",
                    "onlyFinnish": true
                  }
                }
              }
            ],
            "ui:field": "ScopeField",
            "ui:options": {
              "includeAdditionalFieldsChooserButton": true,
              "fields": [
                "unitFact_autocompleteSelectedTaxonID",
                "shortHandText",
                "identifications_0_taxon",
                "unitFact_lineTransectObsType",
                "unitFact_lineTransectRouteFieldType",
                "pairCount",
                "atlasCode"
              ],
              "additionalsPersistenceKey": "unit",
              "fieldScopes": {
                "informalTaxonGroups": {
                  "*": {
                    "additionalFields": [
                      "notes"
                    ]
                  }
                },
                "unitFact_lineTransectObsType": {
                  "MY.lineTransectObsTypeSong": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeOtherSound": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeen": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeFlock": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeenMale": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeenFemale": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeFlyingOverhead": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeFlockFlyingOverhead": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeenPair": {
                    "fields": [
                      "individualCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeenBrood": {
                    "fields": [
                      "broodSize",
                      "pairCount"
                    ]
                  },
                  "MY.lineTransectObsTypeSeenNest": {
                    "fields": [
                      "individualCount",
                      "broodSize",
                      "pairCount"
                    ]
                  }
                }
              }
            },
            "ui:annotations": {
              "container": "modal",
              "adminOnly": true,
              "add": {
                "type": "MAN.typeOpinion"
              },
              "filter": {
                "filterType": "blacklist",
                "filter": [
                  "opinion"
                ]
              }
            },
            "shortHandText": {
              "ui:readonly": true,
              "ui:belowHelp": "<div> <strong>Kirjoita pikakirjoitukseen LAJI (a) (Lukumäärä) Koodi (A/P)</strong> <p> <table class=\"table table-condensed\"> <thead> <tr> <th>Koodi</th><th>Havainnon laatu</th><th>Ilmoitettava lukumäärä</th> </tr> </thead> <tbody> <tr> <td>x</td><td>Laulava</td><td>Yksilömäärä</td> </tr> <tr> <td>v</td><td>Muuten ääntelevä</td><td>Yksilömäärä</td> </tr> <tr> <td>o</td><td>Näköhavainto</td><td>Yksilömäärä</td> </tr> <tr> <td>k</td><td>Koiras</td><td>Yksilömäärä</td> </tr> <tr> <td>n</td><td>Naaras</td><td>Yksilömäärä</td> </tr> <tr> <td>y</td><td>Ylilentävä</td><td>Yksilömäärä</td> </tr> <tr> <td>a luku o</td><Td>Parvi</Td><td>Yksilömäärä</td> </tr> <tr> <td>a luku y</td><td>Lentoparvi</td><td>Yksilömäärä</td> </tr> <tr> <td>pari</td><td>Pari</td><td>Parimäärä</td> </tr> <tr> <td>poikue</td><td>Poikue</td><td>Parimäärä</td> </tr> <tr> <td>pesä</td><td>Pesä</td><td>Parimäärä</td> </tr> </tbody> </table> </p> <p> <table class=\"table table-condensed\"> <tbody> <tr> <th>LAJI</th><td>Lajin kaksi- tai kuusikirjaiminen koodi. Pakollinen.</td> </tr> <tr> <th>a</th><td>Jos kyseessä on parvihavainto, lukumäärän eteen kirjoitetaan a. Muuten a jätetään kirjoittamatta. </td></tr> <tr> <th>Lukumäärä</th><td>Yksilömäärä tai koodeille \"pari\", \"poikue\", \"pesä\" parimäärä. Jos jätetään kirjoittamatta, lukumääräksi tulee 1. </td></tr> <tr> <th>Koodi</th><td>Luettelo koodeista on yllä. Pakollinen. </td></tr> <tr> <th>A/P</th><td>A = Apusarka, P = Pääsarka. Jos jätetään kirjoittamatta, saraksi tulee A. </td></tr> </tbody> </table> </p> <p> Voit käyttää suuria tai pieniä kirjaimia. Voit käyttää välilyöntejä tai kirjoittaa kaiken yhteen. </p> <p>Koodit koiras, naaras, pari, poikue ja pesä: ei kirjata onko nähty tai kuultu</p> <p> Esimerkkejä: <i>TTX, RRvp, pt2xp, ec2y, CSa6y, CORNIX O P, cornixop, TM2pariP, PD3k</i> </p> <p>Vinkki: Jos havaintoa ei hyväksytä pikasyöttökentässä, kokeile sulkea pikasyöttö ja valita erillisistä kentistä.<p> <p><strong>HUOM!</strong> ilmoita parvet aina parvihavaintoina esim. a2o ja havaitut parit koodilla pari. Pikasyötössä 2o tarkoittaa kahta erillistä näköhavaintoa, jotka tulkitaan kahdeksi pariksi.</p> </div>",
              "ui:help": "Syötä havainto pikasyöttökoodein, oikealla puolella olevat sarakkeet täyttyvät automaattisesti"
            },
            "identifications": {
              "items": {
                "detDate": {
                  "ui:widget": "DateWidget"
                }
              }
            },
            "informalTaxonGroups": {
              "ui:field": "HiddenField"
            },
            "unitFact": {
              "autocompleteSelectedTaxonID": {
                "ui:widget": "HiddenWidget"
              },
              "lineTransectRouteFieldType": {
                "ui:help": "A = apusarka, P = pääsarka. Jos jätetään kirjoittamatta, havainto tulkitaan apusaralle."
              }
            },
            "pairCount": {
              "ui:help": "Havainnosta tulkittu parimäärä"
            },
            "broodSize": {
              "ui:help": "Laskettu munien tai poikasten määrä."
            },
            "individualCount": {
              "ui:help": "Jos ei merkitä, oletetaan yksilömääräksi 1."
            },
            "ui:grid": {
              "lg": {
                "shortHandText": 1,
                "identifications_0_taxon": 2,
                "unitFact_lineTransectObsType": 2,
                "unitFact_lineTransectRouteFieldType": 2,
                "individualCount": 1,
                "pairCount": 1,
                "broodSize": 1,
                "notes": 2,
                "likelyMigrant": 4,
                "atlasCode": 2
              },
              "md": {
                "shortHandText": 1,
                "identifications_0_taxon": 2,
                "unitFact_lineTransectObsType": 2,
                "unitFact_lineTransectRouteFieldType": 2,
                "individualCount": 1,
                "pairCount": 1,
                "broodSize": 1,
                "notes": 2,
                "likelyMigrant": 4,
                "atlasCode": 2
              },
              "sm": {
                "shortHandText": 4,
                "identifications_0_taxon": 4,
                "unitFact_lineTransectObsType": 4,
                "unitFact_lineTransectRouteFieldType": 4,
                "individualCount": 3,
                "pairCount": 3,
                "broodSize": 2,
                "notes": 4,
                "likelyMigrant": 8,
                "atlasCode": 2
              },
              "xs": 12
            },
            "ui:order": [
              "shortHandText",
              "identifications_0_taxon",
              "unitFact_lineTransectObsType",
              "unitFact_lineTransectRouteFieldType",
              "individualCount",
              "pairCount",
              "atlasCode",
              "broodSize",
              "notes",
              "*"
            ]
          }
        },
        "taxonCensus": {
          "ui:field": "HiddenField"
        }
      }
    }
  },
  "validators": {
    "gatheringEvent": {
      "presence": {
        "allowEmpty": false
      },
      "timeArray": {
        "fieldContainer": "#/gatherings",
        "lowerRange": "/timeStart",
        "upperRange": "/timeEnd",
        "message": {
          "range": "Biotooppien kellonaikojen täytyy olla ilmoitetulta aikaväliltä %{lowerRange}-%{upperRange}"
        }
      },
      "properties": {
        "leg": {
          "presence": {
            "message": "Vähintään yksi havainnoija täytyy ilmoittaa.",
            "allowEmpty": false
          }
        },
        "dateBegin": {
          "presence": {
            "message": "Päivämäärä pitää ilmoittaa"
          },
          "date": {
            "earliest": "1915-05-01",
            "latest": "now",
            "tooLate": "Päivämäärä ei voi olla tulevaisuudessa",
            "tooEarly": "Päivämäärä on liian vanha"
          },
          "monthDay": {
            "earliestMonth": 5,
            "earliestDay": 1,
            "latestMonth": 7,
            "latestDay": 31,
            "message": {
              "tooEarly": "Päivämäärä on ennen laskenta-aikaa %{value}",
              "tooLate": "Päivämäärä on laskenta-ajan jälkeen %{value}"
            }
          },
          "datetime": {
            "earliest": "1000-01-01",
            "tooEarly": "Päivämäärä on liian varhainen. Varhaisin mahdollinen on %{date}"
          }
        },
        "timeStart": {
          "presence": {
            "message": "Aloitusaika pitää ilmoittaa"
          }
        },
        "timeEnd": {
          "compareNumerically": {
            "greaterThan": "timeStart",
            "message": "Loppuajan tulee olla alkuaikaa myöhemmin"
          },
          "presence": {
            "message": "Lopetusaika pitää ilmoittaa"
          }
        }
      }
    },
    "gatherings": {
      "presence": {
        "message": "Vähintään yksi paikka täytyy ilmoittaa.",
        "allowEmpty": false
      },
      "items": {
        "properties": {
          "units": {
            "items": {
              "properties": {
                "individualCount": {
                  "compareNumerically": {
                    "greaterThan": 1,
                    "onlyWhenAttrIn": {
                      "/unitFact/lineTransectObsType": [
                        "MY.lineTransectObsTypeFlock",
                        "MY.lineTransectObsTypeFlockFlyingOverhead"
                      ]
                    },
                    "message": "Yksilömäärän tulee olla suurempi kuin 1 kun parvi on nähty.",
                    "options": {
                      "_live": true
                    }
                  },
                  "numericality": {
                    "onlyInteger": true,
                    "greaterThanOrEqualTo": 1,
                    "message": "Yksilömäärän tulee olla suurempi kuin 0",
                    "options": {
                      "_live": true
                    }
                  }
                },
                "unitFact": {
                  "properties": {
                    "lineTransectObsType": {
                      "presence": {
                        "message": "Havainnon laatu täytyy ilmoittaa",
                        "options": {
                          "_live": true
                        }
                      }
                    },
                    "lineTransectRouteFieldType": {
                      "presence": {
                        "message": "Sarka täytyy ilmoittaa",
                        "options": {
                          "_live": true
                        }
                      },
                      "crossCheck": {
                        "check": "lineTransectObsType",
                        "onlyWhenCheckIn": [
                          "MY.lineTransectObsTypeFlyingOverhead"
                        ],
                        "valueMustBeIn": [
                          "MY.lineTransectRouteFieldTypeOuter"
                        ],
                        "message": "Pääsaralle ei saa ilmoittaa laaduksi \"Ylilentävä\"",
                        "options": {
                          "_live": true
                        }
                      }
                    }
                  }
                },
                "pairCount": {
                  "compareNumerically": {
                    "lessThanOrEqualTo": "individualCount",
                    "message": "Parimäärä ei saa olla suurempi kuin yksilömäärä."
                  },
                  "numericality": {
                    "onlyInteger": true,
                    "greaterThanOrEqualTo": 1,
                    "message": "Parimäärän tulee olla suurempi kuin 0",
                    "options": {
                      "_live": true
                    }
                  }
                }
              }
            }
          },
          "geometry": {
            "geometry": {
              "requireShape": true,
              "message": {
                "missingGeometries": "Havaintopaikka täytyy merkitä kartalle."
              }
            }
          }
        }
      }
    }
  },
  "warnings": {
    "gatheringEvent": {
      "properties": {
        "dateBegin": {
          "date": {
            "earliest": "lastYear",
            "message": "Päivämäärä on yli vuoden vanha, oletko varma",
            "options": {
              "_live": true
            }
          },
          "monthDayRange": {
            "ranges": [
              {
                "earliestMonth": 5,
                "earliestDay": 25,
                "latestMonth": 7,
                "latestDay": 12
              }
            ],
            "message": {
              "notInAnyRange": "Päivämäärä ei ole laskenta-ajan sisällä (%{value})"
            },
            "options": {
              "_live": true
            }
          }
        },
        "timeStart": {
          "time": {
            "earliestHour": 2,
            "earliestMinute": 20,
            "latestHour": 5,
            "latestMinute": 0,
            "message": {
              "tooEarly": "Aloitusaika on hyvin varhainen, tarkistathan että on oikein",
              "tooLate": "Aloitusaika on hyvin myöhäinen, tarkistathan että on oikein"
            },
            "options": {
              "_live": true
            }
          }
        },
        "timeEnd": {
          "time": {
            "earliestHour": 1,
            "latestHour": 10,
            "latestMinute": 0,
            "message": {
              "tooLate": "Aloitusaika on hyvin myöhäinen, tarkistathan että on oikein"
            },
            "options": {
              "_live": true
            }
          }
        }
      }
    },
    "gatherings": {
      "timeArray": {
        "order": true,
        "count": 10,
        "message": {
          "order": "Biotooppien kellonaikojenaikojen täytyy olla nousevassa järjestyksessä",
          "count": "Vähintään %{count} kellonaikaa täytyy ilmoittaa"
        }
      },
      "items": {
        "properties": {
          "habitatClassification": {
            "presence": {
              "message": "Pääsaran biotooppi puuttuu"
            },
            "transectBiotope": {
              "message": {
                "notString": "%{key} ei ole tyypiltään tekstiä",
                "invalidBiotope": "Biotoopin täytyy olla joko K,M,S,L,J,P,H,R,N,V,A,T tai X, mutta se oli '%{value}'",
                "invalidFocus": "Toisen kirjaimen täytyy olla yksi arvojoukosta %{key}, mutta se oli %{value}",
                "invalidSize": "Väärä kokoluokka annettiin. Kokoluokan pitäisi olla %{key}, mutta se oli %{value}",
                "invalidK": "K pitäisi olla välillä 1-7. Nyt se oli '%{value}'.",
                "invalidPK": "Kun on kyse puista, niin K pitäisi olla välillä 2-35. Nyt se oli '%{value}'.",
                "invalidA": "A pitäisi olla välillä 1-6. Nyt se oli '%{value}'.",
                "invalidX": "Väärä MUU. Pitäisi olla vain tarkentava kirjain tai X, eikä mitään muuta.",
                "tooLong": "Biotoopin koodi sisältää ylimääräisiä arvoja. Käytä lisätiedot kenttää mieluummin.",
                "tooShort": "Biotoopin koodi on liian lyhyt!"
              },
              "options": {
                "_live": true
              }
            }
          },
          "units": {
            "items": {
              "properties": {
                "individualCount": {
                  "numericality": {
                    "onlyInteger": true,
                    "lessThanOrEqualTo": 50,
                    "message": "Yksilömäärä on epätavallisen suuri. Oletko varma?",
                    "options": {
                      "_live": true
                    }
                  }
                },
                "identifications": {
                  "items": {
                    "properties": {
                      "taxon": {
                        "crossCheck": {
                          "check": "../unitFact/autocompleteSelectedTaxonID",
                          "requireCheck": true,
                          "message": "Ei tunnettu"
                        }
                      }
                    }
                  }
                },
                "pairCount": {
                  "numericality": {
                    "onlyInteger": true,
                    "lessThanOrEqualTo": 30,
                    "message": "Parimäärä on epätavallisen suuri. Oletko varma?",
                    "options": {
                      "_live": true
                    }
                  }
                }
              }
            }
          },
          "gatheringFact": {
            "properties": {
              "lineTransectSegmentCounted": {
                "unitCount": {
                  "unitsField": "../units",
                  "onlyWhenValue": true,
                  "min": 1,
                  "message": "Ei löytynyt yhtään ilmoitettua havaintoa."
                },
                "unitCount_1": {
                  "unitsField": "../units",
                  "onlyWhenValue": false,
                  "max": 0,
                  "message": "Havaintoja ilmoitettu, vaikka biotooppia ei ole laskettu."
                }
              }
            }
          }
        }
      }
    }
  },
  "attributes": {
    "id": "MHL.1"
  },
  "$id": "a68f0f5776d491cef95ee84cbd841bed"
}
