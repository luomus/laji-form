{
  "schema":{
    "type":"object",
    "properties":{
      "owner":{
        "type":"string",
        "title":"Tietueen omistaja"
      },
      "attachments":{
        "type":"array",
        "items":{
          "type":"string"
        },
        "title":"Attachments"
      },
      "status":{
        "type":"string",
        "oneOf":[
          {
            "const":"",
            "title":""
          },
          {
            "const":"HRX.statusInProcess",
            "title":""
          },
          {
            "const":"HRX.statusOutstanding",
            "title":""
          },
          {
            "const":"HRX.statusClosed",
            "title":""
          }
        ],
        "title":"Transaktion status"
      },
      "type":{
        "type":"string",
        "oneOf":[
          {
            "const":"HRX.typeLoanIncoming",
            "title":""
          },
          {
            "const":"HRX.typeGiftIncoming",
            "title":""
          },
          {
            "const":"HRX.typeExchangeIncoming",
            "title":""
          },
          {
            "const":"HRX.typeLoanOutgoing",
            "title":""
          },
          {
            "const":"HRX.typeGiftOutgoing",
            "title":""
          },
          {
            "const":"HRX.typeExchangeOutgoing",
            "title":""
          },
          {
            "const":"HRX.typeFieldCollection",
            "title":""
          },
          {
            "const":"HRX.typeImportNotice",
            "title":""
          },
          {
            "const":"HRX.typeABSNegotiations",
            "title":""
          },
          {
            "const":"HRX.typeVirtualLoanOutgoing",
            "title":""
          },
          {
            "const":"HRX.typeDeaccession",
            "title":""
          }
        ],
        "title":"Transaktion tyyppi"
      },
      "requestReceived":{
        "type":"string",
        "title":"Pyynnön päiväys"
      },
      "incomingReceived":{
        "type":"string",
        "title":"Vastaanottopäivä"
      },
      "incomingReturned":{
        "type":"string",
        "title":"Palautuspäivä"
      },
      "material":{
        "type":"string",
        "title":"Materiaali"
      },
      "harmonizedSystemCode":{
        "type":"string",
        "title":"HS Code for customs"
      },
      "externalID":{
        "type":"string",
        "title":"Lähettäjän transaktiotunniste"
      },
      "publicRemarks":{
        "type":"string",
        "title":"Julkiset huomiot"
      },
      "internalRemarks":{
        "type":"string",
        "title":"Yksityiset huomiot"
      },
      "legacyID":{
        "type":"string",
        "title":"Vanha lainatunniste"
      },
      "transportMethod":{
        "type":"string",
        "oneOf":[
          {
            "const":"",
            "title":""
          },
          {
            "const":"HRX.transportMethodPriority",
            "title":""
          },
          {
            "const":"HRX.transportMethodEconomy",
            "title":""
          },
          {
            "const":"HRX.transportMethodCourier",
            "title":""
          },
          {
            "const":"HRX.transportMethodCarried",
            "title":""
          },
          {
            "const":"HRX.transportMethodOther",
            "title":""
          },
          {
            "const":"HRX.transportMethodImage",
            "title":""
          }
        ],
        "title":"Lähetystapa"
      },
      "numberOfParcels":{
        "type":"string",
        "title":"Pakettien määrä"
      },
      "outgoingSent":{
        "type":"string",
        "title":"Uloslähtevä laina lähetetty"
      },
      "dueDate":{
        "type":"string",
        "title":"Eräpäivä"
      },
      "receiptReturned":{
        "type":"string",
        "title":"Kuittaus palautettu"
      },
      "outgoingReturned":{
        "type":"string",
        "title":"Uloslähtevän laina palautettu"
      },
      "correspondentOrganization":{
        "type":"string",
        "title":"Vastaanottava/lähettävä organisaatio"
      },
      "correspondentPerson":{
        "type":"string",
        "title":"Vastaanottava/lähettävä henkilö"
      },
      "correspondentResearcher":{
        "type":"string",
        "title":"Vastaanottava tutkija"
      },
      "localHandler":{
        "type":"string",
        "title":"Käsittelijä"
      },
      "localHandlerEmail":{
        "type":"string",
        "title":"Handler email"
      },
      "localPerson":{
        "type":"string",
        "title":"Vastuuhenkilö"
      },
      "localPersonEmail":{
        "type":"string",
        "title":"Sähköpostiosoite"
      },
      "localResearcher":{
        "type":"string",
        "title":"Vastaanottava tutkija"
      },
      "collectionID":{
        "type":"string",
        "title":"Kokoelma"
      },
      "geneticResourceAcquisitionDate":{
        "type":"string",
        "title":"Saannin päivämäärä"
      },
      "geneticResourceAcquisitionCountry":{
        "type":"string",
        "title":"Saantipaikka/maa"
      },
      "underNagoya":{
        "type":"boolean",
        "title":"Päteekö Nagoyan protokolla?"
      },
      "availableForGeneticResearch":{
        "type":"string",
        "oneOf":[
          {
            "const":"",
            "title":""
          },
          {
            "const":"HRX.availableForGeneticResearchYes",
            "title":""
          },
          {
            "const":"HRX.availableForGeneticResearchWithRestrictions",
            "title":""
          },
          {
            "const":"HRX.availableForGeneticResearchNo",
            "title":""
          }
        ],
        "title":"Onko geneettinen tutkimus sallittua geenivaroilla?"
      },
      "geneticResourceRightsAndObligations":{
        "type":"string",
        "title":"Oikeudet ja velvollisuudet"
      },
      "geneticResourceType":{
        "type":"string",
        "oneOf":[
          {
            "const":"",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypeAnimal",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypePlant",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypeFungus",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypeMicrobe",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypeSoil",
            "title":""
          },
          {
            "const":"HRX.geneticResourceTypeAqua",
            "title":""
          }
        ],
        "title":"Resurssin tyyppi"
      },
      "hasIRCC":{
        "type":"boolean",
        "title":"Onko IRCC-numero?",
        "default":false
      },
      "IRCC":{
        "type":"string",
        "title":"IRCC numero"
      },
      "resourceImported":{
        "type":"string",
        "title":"Mitä tuot maahan?"
      },
      "geneticResourceDescription":{
        "type":"string",
        "title":"Kuvaus"
      },
      "geneticResourceSource":{
        "type":"string",
        "title":"Alkuperä tai saannin taho"
      },
      "permits":{
        "type":"array",
        "items":{
          "type":"object",
          "properties":{
            "permitType":{
              "type":"string",
              "oneOf":[
                {
                  "const":"",
                  "title":""
                },
                {
                  "const":"HRA.permitTypePIC",
                  "title":""
                },
                {
                  "const":"HRA.permitTypeMAT",
                  "title":""
                },
                {
                  "const":"HRA.permitTypeMTA",
                  "title":""
                },
                {
                  "const":"HRA.permitCollectingPermit",
                  "title":""
                },
                {
                  "const":"HRA.permitTypeExportPermit",
                  "title":""
                },
                {
                  "const":"HRA.permitTypeOther",
                  "title":""
                },
                {
                  "const":"HRA.permitTypeMemorandumOfUnderstanding",
                  "title":""
                }
              ],
              "title":"Permit type"
            },
            "permitStatus":{
              "type":"string",
              "oneOf":[
                {
                  "const":"",
                  "title":""
                },
                {
                  "const":"HRA.permitStatusAvailable",
                  "title":""
                },
                {
                  "const":"HRA.permitStatusNotRequired",
                  "title":""
                }
              ],
              "title":"Permit status"
            },
            "permitFile":{
              "type":"string",
              "title":"File"
            },
            "permitStartDate":{
              "type":"string",
              "title":"Start date"
            },
            "permitEndDate":{
              "type":"string",
              "title":"End date"
            },
            "permitNotes":{
              "type":"string",
              "title":"Notes"
            }
          },
          "required":[

          ]
        },
        "title":"Luvat"
      },
      "transactionEvents":{
        "type":"array",
        "items":{
          "type":"object",
          "properties":{
            "eventType":{
              "type":"string",
              "oneOf":[
                {
                  "const":"HRX.eventTypeReturn",
                  "title":""
                },
                {
                  "const":"HRX.eventTypeAddition",
                  "title":""
                }
              ],
              "title":"Event type"
            },
            "eventDate":{
              "type":"string",
              "title":"Date"
            },
            "eventHandler":{
              "type":"string",
              "title":"Handler"
            },
            "eventNotes":{
              "type":"string",
              "title":"Notes"
            },
            "eventDocumentIDs":{
              "type":"array",
              "items":{
                "type":"string"
              },
              "title":"Specimen IDs"
            }
          },
          "required":[
            "eventType",
            "eventDate"
          ]
        },
        "title":"Transaktion tapahtumat"
      },
      "awayIDs":{
        "type":"array",
        "items":{
          "type":"string"
        },
        "title":"Included in/On loan IDs"
      },
      "returnedIDs":{
        "type":"array",
        "items":{
          "type":"string"
        },
        "title":"Returned IDs"
      },
      "missingIDs":{
        "type":"array",
        "items":{
          "type":"string"
        },
        "title":"Missing IDs"
      },
      "awayCount":{
        "type":"integer",
        "minimum":0,
        "title":"Included in/On loan count"
      },
      "returnedCount":{
        "type":"integer",
        "minimum":0,
        "title":"Returned count"
      },
      "missingCount":{
        "type":"integer",
        "minimum":0,
        "title":"Missing count"
      }
    },
    "required":[
      "owner",
      "type"
    ]
  },
  "excludeFromCopy":[
    "$.geneticResourceAcquisitionDate",
    "$.geneticResourceAcquisitionCountry",
    "$.underNagoya",
    "$.availableForGeneticResearch",
    "$.geneticResourceRightsAndObligations",
    "$.geneticResourceType",
    "$.hasIRCC",
    "$.IRCC",
    "$.resourceImported",
    "$.geneticResourceDescription",
    "$.geneticResourceSource",
    "$.permits",
    "$.transactionEvents",
    "$.awayIDs",
    "$.returnedIDs",
    "$.missingIDs",
    "$.awayCount",
    "$.returnedCount",
    "$.missingCount"
  ],
  "name":"Kotka - Transaction",
  "language":"fi",
  "title":"Kotka - Transaction",
  "options":{
    "useSchemaCommentsAsHelpTexts":true,
    "allowTemplate":true,
    "strict":false
  },
  "uiSchema":{
    "ui:functions":[
      {
        "ui:field":"ScopeField",
        "ui:options":{
          "fields":[
            "owner",
            "attachments",
            "status",
            "type"
          ],
          "fieldScopes":{
            "type":{
              "+":{
                "fields":[
                  "requestReceived",
                  "incomingReceived",
                  "incomingReturned",
                  "material",
                  "harmonizedSystemCode",
                  "externalID",
                  "publicRemarks",
                  "internalRemarks",
                  "legacyID",
                  "transportMethod",
                  "numberOfParcels",
                  "outgoingSent",
                  "dueDate",
                  "receiptReturned",
                  "outgoingReturned",
                  "correspondentOrganization",
                  "correspondentPerson",
                  "correspondentResearcher",
                  "localHandler",
                  "localHandlerEmail",
                  "localPerson",
                  "localPersonEmail",
                  "localResearcher",
                  "collectionID",
                  "geneticResourceAcquisitionDate",
                  "geneticResourceAcquisitionCountry",
                  "underNagoya",
                  "availableForGeneticResearch",
                  "geneticResourceRightsAndObligations",
                  "geneticResourceType",
                  "hasIRCC",
                  "IRCC",
                  "resourceImported",
                  "geneticResourceDescription",
                  "geneticResourceSource",
                  "permits",
                  "transactionEvents",
                  "awayCount",
                  "returnedCount",
                  "missingCount",
                  "awayIDs",
                  "returnedIDs",
                  "missingIDs"
                ],
                "uiSchema":{
                  "correspondent":{
                    "ui:field":""
                  },
                  "local":{
                    "ui:field":""
                  },
                  "nagoyaWrapper":{
                    "ui:field":""
                  },
                  "transactionEvents":{
                    "ui:field":""
                  },
                  "specimens":{
                    "ui:field":""
                  }
                }
              },
              "HRX.typeLoanIncoming":{
                "excludeFields":[
                  "requestReceived",
                  "outgoingSent",
                  "outgoingReturned",
                  "correspondentResearcher"
                ],
                "uiSchema":{
                  "incomingReceived":{
                    "ui:required":true
                  },
                  "correspondentOrganization":{
                    "ui:required":true
                  },
                  "awayIDs":{
                    "ui:title":"On loan IDs"
                  },
                  "awayCount":{
                    "ui:title":"On loan count"
                  },
                  "transactionEvents":{
                    "items":{
                      "eventType":{
                        "ui:options":{
                          "filter":[

                          ]
                        }
                      }
                    }
                  },
                  "specimenIDs":{
                    "ui:options":{
                      "buttons":[
                        {
                          "operation":"moveAll",
                          "fromField":"awayIDs",
                          "toField":"returnedIDs",
                          "label":"Mark all as returned",
                          "className":"mt-1 mb-3"
                        },
                        {
                          "operation":"move",
                          "toField":"awayIDs",
                          "label":"Mark as on loan"
                        },
                        {
                          "operation":"move",
                          "toField":"returnedIDs",
                          "label":"Mark as returned"
                        },
                        {
                          "operation":"move",
                          "toField":"missingIDs",
                          "label":"Mark as missing",
                          "className":"mb-3"
                        },
                        {
                          "operation":"delete",
                          "label":"Delete"
                        }
                      ]
                    }
                  }
                }
              },
              "HRX.typeLoanOutgoing":{
                "excludeFields":[
                  "incomingReceived",
                  "incomingReturned",
                  "localResearcher"
                ],
                "uiSchema":{
                  "correspondentOrganization":{
                    "ui:required":true
                  },
                  "outgoingSent":{
                    "ui:required":true
                  },
                  "awayIDs":{
                    "ui:title":"On loan IDs"
                  },
                  "awayCount":{
                    "ui:title":"On loan count"
                  },
                  "transactionEvents":{
                    "items":{
                      "eventType":{
                        "ui:options":{
                          "filter":[

                          ]
                        }
                      }
                    }
                  },
                  "specimenIDs":{
                    "ui:options":{
                      "buttons":[
                        {
                          "operation":"moveAll",
                          "fromField":"awayIDs",
                          "toField":"returnedIDs",
                          "label":"Mark all as returned",
                          "className":"mt-1 mb-3"
                        },
                        {
                          "operation":"move",
                          "toField":"awayIDs",
                          "label":"Mark as on loan"
                        },
                        {
                          "operation":"move",
                          "toField":"returnedIDs",
                          "label":"Mark as returned"
                        },
                        {
                          "operation":"move",
                          "toField":"missingIDs",
                          "label":"Mark as missing",
                          "className":"mb-3"
                        },
                        {
                          "operation":"delete",
                          "label":"Delete"
                        }
                      ]
                    }
                  }
                }
              },
              "HRX.typeGiftIncoming":{
                "excludeFields":[
                  "requestReceived",
                  "incomingReturned",
                  "outgoingSent",
                  "outgoingReturned",
                  "correspondentResearcher",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "dueDate"
                ],
                "uiSchema":{
                  "incomingReceived":{
                    "ui:required":true
                  },
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeGiftOutgoing":{
                "excludeFields":[
                  "incomingReceived",
                  "incomingReturned",
                  "outgoingReturned",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "dueDate"
                ],
                "uiSchema":{
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeExchangeIncoming":{
                "excludeFields":[
                  "requestReceived",
                  "incomingReturned",
                  "outgoingSent",
                  "outgoingReturned",
                  "correspondentResearcher",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "dueDate"
                ],
                "uiSchema":{
                  "incomingReceived":{
                    "ui:required":true
                  },
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeExchangeOutgoing":{
                "excludeFields":[
                  "incomingReceived",
                  "incomingReturned",
                  "outgoingReturned",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "dueDate"
                ],
                "uiSchema":{
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeVirtualLoanOutgoing":{
                "excludeFields":[
                  "incomingReceived",
                  "incomingReturned",
                  "outgoingReturned",
                  "numberOfParcels",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "missingCount",
                  "missingIDs",
                  "dueDate"
                ],
                "uiSchema":{
                  "requestReceived":{
                    "ui:required":true
                  },
                  "correspondentOrganization":{
                    "ui:required":true
                  },
                  "specimenIDs":{
                    "ui:options":{
                      "buttons":[
                        {
                          "operation":"delete",
                          "label":"Delete",
                          "className":"mt-4"
                        }
                      ]
                    }
                  }
                }
              },
              "HRX.typeFieldCollection":{
                "excludeFields":[
                  "requestReceived",
                  "incomingReturned",
                  "outgoingSent",
                  "outgoingReturned",
                  "externalID",
                  "dueDate",
                  "receiptReturned",
                  "correspondentOrganization",
                  "returnedCount",
                  "returnedIDs"
                ]
              },
              "HRX.typeImportNotice":{
                "excludeFields":[
                  "requestReceived",
                  "incomingReturned",
                  "outgoingSent",
                  "outgoingReturned",
                  "externalID",
                  "transportMethod",
                  "numberOfParcels",
                  "dueDate",
                  "receiptReturned",
                  "returnedCount",
                  "returnedIDs"
                ],
                "uiSchema":{
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeABSNegotiations":{
                "excludeFields":[
                  "requestReceived",
                  "incomingReturned",
                  "outgoingSent",
                  "outgoingReturned",
                  "transportMethod",
                  "numberOfParcels",
                  "dueDate",
                  "receiptReturned",
                  "returnedCount",
                  "returnedIDs"
                ],
                "uiSchema":{
                  "correspondentOrganization":{
                    "ui:required":true
                  }
                }
              },
              "HRX.typeDeaccession":{
                "excludeFields":[
                  "incomingReceived",
                  "incomingReturned",
                  "publicRemarks",
                  "outgoingReturned",
                  "transportMethod",
                  "numberOfParcels",
                  "dueDate",
                  "receiptReturned",
                  "localResearcher",
                  "returnedCount",
                  "returnedIDs",
                  "missingCount",
                  "missingIDs"
                ],
                "uiSchema":{
                  "correspondent":{
                    "ui:field":"HiddenField"
                  },
                  "nagoyaWrapper":{
                    "ui:field":"HiddenField"
                  },
                  "specimenIDs":{
                    "ui:options":{
                      "buttons":[
                        {
                          "operation":"delete",
                          "label":"Delete",
                          "className":"mt-4"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    ],
    "ui:field":"NestField",
    "ui:options":{
      "nests":{
        "generalFields":{
          "title":"",
          "fields":[
            "owner",
            "attachments"
          ]
        },
        "transactionFields":{
          "title":"",
          "fields":[
            "status",
            "type",
            "requestReceived",
            "incomingReceived",
            "incomingReturned",
            "material",
            "harmonizedSystemCode",
            "externalID",
            "publicRemarks",
            "internalRemarks",
            "legacyID",
            "transportMethod",
            "numberOfParcels",
            "outgoingSent",
            "dueDate",
            "receiptReturned",
            "outgoingReturned"
          ]
        },
        "transaction":{
          "title":"Transaction",
          "fields":[
            "transactionFields"
          ]
        },
        "correspondentFields":{
          "title":"",
          "fields":[
            "correspondentOrganization",
            "correspondentPerson",
            "correspondentResearcher"
          ]
        },
        "correspondent":{
          "title":"Counterparty",
          "fields":[
            "correspondentFields"
          ]
        },
        "localFields":{
          "title":"",
          "fields":[
            "localHandler",
            "localHandlerEmail",
            "localPerson",
            "localPersonEmail",
            "localResearcher",
            "collectionID"
          ]
        },
        "local":{
          "title":"Our museum",
          "fields":[
            "localFields"
          ]
        },
        "nagoyaFields":{
          "title":"",
          "fields":[
            "geneticResourceAcquisitionDate",
            "geneticResourceAcquisitionCountry",
            "underNagoya",
            "availableForGeneticResearch",
            "geneticResourceRightsAndObligations",
            "geneticResourceType",
            "hasIRCC",
            "IRCC",
            "resourceImported",
            "geneticResourceDescription",
            "geneticResourceSource"
          ]
        },
        "nagoyaWrapper":{
          "title":"Permits (Nagoya protocol etc.)",
          "fields":[
            "nagoyaFields",
            "permits"
          ]
        },
        "specimenIDs":{
          "title":"",
          "fields":[
            "awayIDs",
            "returnedIDs",
            "missingIDs"
          ]
        },
        "specimenCounts":{
          "title":"",
          "fields":[
            "awayCount",
            "returnedCount",
            "missingCount"
          ]
        },
        "specimenCountsWrapper":{
          "title":"Number of specimens without IDs",
          "fields":[
            "specimenCounts"
          ]
        },
        "specimens":{
          "title":"Specimens",
          "fields":[
            "specimenIDs",
            "specimenCountsWrapper"
          ]
        }
      }
    },
    "ui:order":[
      "*",
      "transactionEvents",
      "specimens"
    ],
    "generalFields":{
      "ui:grid":{
        "lg":6,
        "md":7,
        "sm":8,
        "xs":12,
        "rows":[
          [
            "owner"
          ],
          [
            "attachments"
          ]
        ]
      },
      "owner":{
        "ui:widget":"AutosuggestWidget",
        "ui:options":{
          "autosuggestField":"organization",
          "allowNonsuggestedValue":true,
          "suggestionReceive":"key",
          "displayValidationState":true,
          "minFetchLength":0,
          "query":{
            "onlyOwnOrganizations":true
          }
        }
      },
      "attachments":{
        "ui:field":"PdfArrayField"
      }
    },
    "transaction":{
      "ui:grid":{
        "lg":6,
        "md":7,
        "sm":8,
        "xs":12
      },
      "transactionFields":{
        "requestReceived":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "incomingReceived":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "incomingReturned":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "material":{
          "ui:widget":"textarea"
        },
        "publicRemarks":{
          "ui:widget":"textarea"
        },
        "internalRemarks":{
          "ui:widget":"textarea"
        },
        "outgoingSent":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "dueDate":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY",
            "showButtons":{
              "plusSixMonths":true,
              "plusYear":true
            }
          }
        },
        "receiptReturned":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "outgoingReturned":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        }
      }
    },
    "correspondent":{
      "ui:field":"HiddenField",
      "ui:grid":{
        "lg":6,
        "md":7,
        "sm":8,
        "xs":12
      },
      "correspondentFields":{
        "correspondentOrganization":{
          "ui:classNames":"correspondent-organization",
          "ui:widget":"AutosuggestWidget",
          "ui:options":{
            "autosuggestField":"organization",
            "allowNonsuggestedValue":true,
            "suggestionReceive":"key",
            "displayValidationState":true,
            "minFetchLength":0
          }
        },
        "correspondentPerson":{
          "ui:widget":"textarea"
        }
      }
    },
    "local":{
      "ui:field":"HiddenField",
      "ui:grid":{
        "lg":6,
        "md":7,
        "sm":8,
        "xs":12
      },
      "localFields":{
        "ui:functions":[
          {
            "ui:field":"InputWithDefaultValueButtonField",
            "ui:options":{
              "buttonLabel":"me",
              "buttonField":"localHandler",
              "valueFields":[
                {
                  "field":"localHandler",
                  "contextFieldForDefaultValue":"userName"
                },
                {
                  "field":"localHandlerEmail",
                  "contextFieldForDefaultValue":"userEmail"
                }
              ]
            }
          },
          {
            "ui:field":"InputWithDefaultValueButtonField",
            "ui:options":{
              "buttonLabel":"me",
              "buttonField":"localPerson",
              "valueFields":[
                {
                  "field":"localPerson",
                  "contextFieldForDefaultValue":"userName"
                },
                {
                  "field":"localPersonEmail",
                  "contextFieldForDefaultValue":"userEmail"
                }
              ]
            }
          }
        ],
        "collectionID":{
          "ui:widget":"AutosuggestWidget",
          "ui:options":{
            "autosuggestField":"collection",
            "allowNonsuggestedValue":true,
            "suggestionReceive":"key",
            "displayValidationState":true,
            "minFetchLength":3,
            "limit":20
          }
        }
      }
    },
    "nagoyaWrapper":{
      "ui:field":"HiddenField",
      "ui:grid":{
        "lg":{
          "permits":12,
          "*":6
        },
        "md":{
          "permits":12,
          "*":7
        },
        "sm":{
          "permits":12,
          "*":8
        },
        "xs":12,
        "rows":[
          [
            "nagoyaFields"
          ],
          [
            "permits"
          ]
        ]
      },
      "nagoyaFields":{
        "ui:classNames":"nagoya-fields",
        "ui:functions":[
          {
            "ui:field":"ScopeField",
            "ui:options":{
              "fields":[
                "geneticResourceAcquisitionDate",
                "geneticResourceAcquisitionCountry",
                "underNagoya",
                "availableForGeneticResearch",
                "geneticResourceRightsAndObligations",
                "geneticResourceType",
                "hasIRCC",
                "resourceImported",
                "geneticResourceDescription",
                "geneticResourceSource"
              ],
              "fieldScopes":{
                "hasIRCC":{
                  "true":{
                    "fields":[
                      "IRCC"
                    ],
                    "excludeFields":[
                      "resourceImported",
                      "geneticResourceDescription",
                      "geneticResourceSource"
                    ]
                  }
                }
              }
            }
          }
        ],
        "geneticResourceAcquisitionDate":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "geneticResourceRightsAndObligations":{
          "ui:widget":"textarea"
        },
        "hasIRCC":{
          "ui:options":{
            "allowUndefined":false
          }
        },
        "geneticResourceDescription":{
          "ui:widget":"textarea"
        }
      },
      "permits":{
        "items":{
          "ui:classNames":"card card-body bg-light",
          "ui:order":[
            "permitFile",
            "*"
          ],
          "ui:grid":{
            "lg":{
              "permitFile":12,
              "permitNotes":12,
              "*":3
            },
            "md":{
              "permitFile":12,
              "permitNotes":12,
              "*":3
            },
            "sm":12,
            "xs":12
          },
          "permitFile":{
            "ui:functions":{
              "ui:field":"AsArrayField"
            },
            "ui:field":"PdfArrayField"
          },
          "permitStartDate":{
            "ui:widget":"DateWidget",
            "ui:options":{
              "dateFormat":"DD.MM.YYYY"
            }
          },
          "permitEndDate":{
            "ui:widget":"DateWidget",
            "ui:options":{
              "dateFormat":"DD.MM.YYYY"
            }
          }
        }
      }
    },
    "transactionEvents":{
      "ui:field":"HiddenField",
      "ui:options":{
        "confirmDelete":true
      },
      "items":{
        "ui:classNames":"card card-body bg-light",
        "ui:grid":{
          "lg":{
            "eventType":6,
            "eventHandler":6,
            "*":12
          },
          "md":{
            "eventType":6,
            "eventHandler":6,
            "*":12
          },
          "sm":12,
          "xs":12
        },
        "eventType":{
          "ui:options":{
            "filter":[
              "HRX.eventTypeReturn"
            ]
          }
        },
        "eventDate":{
          "ui:widget":"DateWidget",
          "ui:options":{
            "dateFormat":"DD.MM.YYYY"
          }
        },
        "eventHandler":{
          "ui:widget":"InputWithDefaultValueButtonWidget",
          "ui:options":{
            "buttonLabel":"me",
            "contextFieldForDefaultValue":"userName"
          }
        },
        "eventNotes":{
          "ui:widget":"textarea"
        },
        "eventDocumentIDs":{
          "ui:field":"TagArrayField",
          "ui:options":{
            "separatorKeys":[
              "Enter",
              ",",
              ";",
              " "
            ],
            "showAsLink":true,
            "linkPrefix":"https://kotkatest.luomus.fi/view?uri=",
            "replacements":[
              {
                "searchRegexp":"^(H[0-9]{7,8})$",
                "replaceValue":"HA.$1"
              }
            ]
          }
        }
      }
    },
    "specimens":{
      "ui:field":"HiddenField",
      "specimenIDs":{
        "ui:classNames":"specimen-id-fields",
        "ui:field":"MultiTagArrayField",
        "ui:options":{
          "separatorKeys":[
            "Enter",
            ",",
            ";",
            " "
          ],
          "showDeleteButton":false,
          "showAsLink":true,
          "linkPrefix":"https://kotkatest.luomus.fi/view?uri=",
          "replacements":[
            {
              "searchRegexp":"^(H[0-9]{7,8})$",
              "replaceValue":"HA.$1"
            }
          ],
          "buttons":[
            {
              "operation":"move",
              "toField":"awayIDs",
              "label":"Mark as included in",
              "className":"mt-1"
            },
            {
              "operation":"move",
              "toField":"missingIDs",
              "label":"Mark as missing",
              "className":"mb-3"
            },
            {
              "operation":"delete",
              "label":"Delete"
            }
          ]
        },
        "awayIDs":{
          "ui:title":"Included in IDs"
        }
      },
      "specimenCountsWrapper":{
        "ui:grid":{
          "lg":6,
          "md":6,
          "sm":8,
          "xs":12
        },
        "specimenCounts":{
          "ui:grid":{
            "lg":4,
            "md":4,
            "sm":4,
            "xs":12
          },
          "awayCount":{
            "ui:title":"Included in count"
          }
        }
      }
    }
  },
  "context":"specimenTransaction",
  "id":"MHL.930",
  "validators":{
    "owner":{
      "format":{
        "pattern":"^MOS\\.\\d+$",
        "message":"Unknown organization"
      }
    },
    "requestReceived":{
      "crossCheck":{
        "check":"type",
        "onlyWhenCheckIn":[
          "HRX.typeVirtualLoanOutgoing"
        ],
        "message":"Required field."
      }
    },
    "incomingReceived":{
      "crossCheck":{
        "check":"type",
        "onlyWhenCheckIn":[
          "HRX.typeLoanIncoming",
          "HRX.typeGiftIncoming",
          "HRX.typeExchangeIncoming"
        ],
        "message":"Required field."
      }
    },
    "outgoingSent":{
      "crossCheck":{
        "check":"type",
        "onlyWhenCheckIn":[
          "HRX.typeLoanOutgoing"
        ],
        "message":"Required field."
      }
    },
    "dueDate":{
      "compareDate":{
        "isAfter":"outgoingSent",
        "message":"Date can't be earlier than the outgoing loan sent date."
      }
    },
    "receiptReturned":{
      "compareDate":{
        "isAfter":"outgoingSent",
        "message":"Date can't be earlier than the outgoing loan sent date."
      }
    },
    "outgoingReturned":{
      "compareDate":{
        "isAfter":"outgoingSent",
        "message":"Date can't be earlier than the outgoing loan sent date."
      }
    },
    "correspondentOrganization":{
      "format":{
        "pattern":"(^$)|(^MOS\\.\\d+$)",
        "message":"Unknown organization"
      },
      "crossCheck":{
        "check":"type",
        "onlyWhenCheckIn":[
          "HRX.typeLoanIncoming",
          "HRX.typeGiftIncoming",
          "HRX.typeExchangeIncoming",
          "HRX.typeLoanOutgoing",
          "HRX.typeGiftOutgoing",
          "HRX.typeExchangeOutgoing",
          "HRX.typeImportNotice",
          "HRX.typeABSNegotiations",
          "HRX.typeVirtualLoanOutgoing"
        ],
        "message":"Required field."
      }
    },
    "geneticResourceAcquisitionDate":{
      "crossCheck":{
        "checkOptions":[
          {
            "check":"underNagoya",
            "onlyWhenCheckIn":[
              true
            ]
          },
          {
            "check":"availableForGeneticResearch",
            "onlyWhenCheckIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "check":"hasIRCC",
            "onlyWhenCheckIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number this must be filled."
      }
    },
    "geneticResourceAcquisitionCountry":{
      "crossCheck":{
        "checkOptions":[
          {
            "check":"underNagoya",
            "onlyWhenCheckIn":[
              true
            ]
          },
          {
            "check":"availableForGeneticResearch",
            "onlyWhenCheckIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "check":"hasIRCC",
            "onlyWhenCheckIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number this must be filled."
      }
    },
    "availableForGeneticResearch":{
      "crossCheck":{
        "check":"underNagoya",
        "onlyWhenCheckIn":[
          true
        ],
        "message":"Since under Nagoya this must be filled."
      }
    },
    "geneticResourceRightsAndObligations":{
      "crossCheck":{
        "check":"availableForGeneticResearch",
        "onlyWhenCheckIn":[
          "HRX.availableForGeneticResearchWithRestrictions"
        ],
        "message":"Rights and obligations have to be filled when \"Yes, with restrictions\" is selected."
      }
    },
    "IRCC":{
      "crossCheck":{
        "checkOptions":[
          {
            "check":"underNagoya",
            "onlyWhenCheckIn":[
              true
            ]
          },
          {
            "check":"availableForGeneticResearch",
            "onlyWhenCheckIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "check":"hasIRCC",
            "onlyWhenCheckIn":[
              true
            ]
          }
        ],
        "message":"Since available for genetic research you have must tell the IRCC number if you have it."
      },
      "remote":{
        "validator":"kotkaIRCCNumber"
      }
    },
    "geneticResourceDescription":{
      "crossCheck":{
        "checkOptions":[
          {
            "check":"underNagoya",
            "onlyWhenCheckIn":[
              true
            ]
          },
          {
            "check":"availableForGeneticResearch",
            "onlyWhenCheckIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "check":"hasIRCC",
            "onlyWhenCheckIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number this must be filled."
      }
    },
    "geneticResourceSource":{
      "crossCheck":{
        "checkOptions":[
          {
            "check":"underNagoya",
            "onlyWhenCheckIn":[
              true
            ]
          },
          {
            "check":"availableForGeneticResearch",
            "onlyWhenCheckIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "check":"hasIRCC",
            "onlyWhenCheckIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number this must be filled."
      }
    },
    "permits":{
      "valueInArray_0":{
        "value":"HRA.permitTypePIC",
        "arrayField":"permits",
        "arrayFieldKey":"permitType",
        "conditions":[
          {
            "onlyWhenField":"underNagoya",
            "onlyWhenFieldIn":[
              true
            ]
          },
          {
            "onlyWhenField":"availableForGeneticResearch",
            "onlyWhenFieldIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "onlyWhenField":"hasIRCC",
            "onlyWhenFieldIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number you have to have PIC permit."
      },
      "valueInArray_1":{
        "value":"HRA.permitTypeMAT",
        "arrayField":"permits",
        "arrayFieldKey":"permitType",
        "conditions":[
          {
            "onlyWhenField":"underNagoya",
            "onlyWhenFieldIn":[
              true
            ]
          },
          {
            "onlyWhenField":"availableForGeneticResearch",
            "onlyWhenFieldIn":[
              "HRX.availableForGeneticResearchYes",
              "HRX.availableForGeneticResearchWithRestrictions"
            ]
          },
          {
            "onlyWhenField":"hasIRCC",
            "onlyWhenFieldIn":[
              false
            ]
          }
        ],
        "message":"Since available for genetic research and no IRCC number you have to have MAT permit."
      },
      "items":{
        "properties":{
          "permitFile":{
            "crossCheck":{
              "check":"permitStatus",
              "onlyWhenCheckIn":[
                "HRA.permitStatusAvailable"
              ],
              "message":"You have to upload the permit when available."
            }
          }
        }
      }
    },
    "awayIDs":{
      "arrayDuplicateCheck":{
        "checkFields":[
          "returnedIDs",
          "missingIDs"
        ],
        "message":"Duplicate specimen ID %{value}."
      }
    },
    "returnedIDs":{
      "arrayDuplicateCheck":{
        "checkFields":[
          "awayIDs",
          "missingIDs"
        ],
        "message":"Duplicate specimen ID %{value}."
      }
    },
    "missingIDs":{
      "arrayDuplicateCheck":{
        "checkFields":[
          "awayIDs",
          "returnedIDs"
        ],
        "message":"Duplicate specimen ID %{value}."
      }
    }
  },
  "warnings":{
    "outgoingSent":{
      "crossCheck":{
        "check":"type",
        "onlyWhenCheckIn":[
          "HRX.typeGiftOutgoing",
          "HRX.typeExchangeOutgoing",
          "HRX.typeVirtualLoanOutgoing"
        ],
        "message":"Field is empty."
      }
    }
  },
  "attributes":{
    "id":"MHL.930"
  }
}
