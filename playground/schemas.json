{
	"id": "JX.519",
	"title": "Tripreport",
	"description": "With this form you can log spceimens that you've seen.",
	"uiSchema": {
		"ui:order": ["gatherings", "temp", "ready"],
		"ui:field": "inject",
		"ui:options": {
			"injections": {
				"fields": ["editors"],
				"target": "gatherings"
			}
		},
		"gatherings": {
			"ui:field": "mapArray",
			"items": {
				"ui:order": ["wgs84Geometry", "legWrapper", "eventTime", "units", "treeWrapper", "imagesWrapper"],
				"ui:field": "nested",
				"ui:options": {
					"eventTime": {
						"title": "Aika",
						"fields": ["dateBegin", "dateEnd"],
						"uiSchema": {
							"ui:field": "expandable",
							"ui:options": {
								"additionalFields": ["dateEnd"],
								"uiSchema": {
									"ui:field": "horizontal",
									"dateBegin": {
										"ui:widget": "dateTime"
									},
									"dateEnd": {
										"ui:widget": "dateTime"
									}
								},
								"expanderButtonText": "Ilmoita aikaväli",
								"contractorButtonText": "Piilota aikavälin loppu"
							}
						}
					},
					"legWrapper": {
						"title": "Havainnoitsijat",
						"fields": ["leg", "legPublic", "editors"],
						"uiSchema": {
							"ui:field": "nested",
							"ui:options": {
								"": {
									"fields": ["leg", "editors"],
									"uiSchema": {
										"ui:field": "dependentBoolean",
										"ui:options": {
											"booleanField": "editors",
											"booleanDefiner": "leg",
											"uiSchema": {
												"ui:field": "arrayCombiner",
												"ui:options": {
													"uiSchema": {
														"items": {
															"leg": {
																"ui:field": "autosuggestWidget",
																"ui:options": {
																	"autosuggestField": "friends",
																	"allowNonsuggestedValue": true,
																	"suggestionReceive": "key"
																}
															},
															"ui:field": "dependentDisable",
															"ui:options": {
																"disableDefiner": "leg",
																"disableField": "editors",
																"regexp": "^MA\\.\\d+$"
															}
														},
														"ui:field": "table"
													}
												}
											}
										}
									}
								}
							}
						}
					},
					"imagesWrapper": {
						"title": "Kuvat",
						"fields": ["image", "rights"],
						"uiSchema": {
							"ui:field": "horizontal"
						}
					},
					"treeWrapper": {
						"title": "Havaintopaikan tiedot",
						"fields" : ["tree"],
						"uiSchema": {
							"tree": {
							"ui:field": "tree",
							"ui:options": {
								"tree": {
									"children": {
										"K2": {
											"children": {
												"K3": {
													"children": {
														"K4": {},
														"K5": {},
														"K6": {
															"children": {
																"K7": {},
																"K8": {}
															},
															"order": ["K7","K8"]
														}
													},
													"order": ["K4, K5", "K6"]
												},
												"K9": {
													"children": {
														"K10": {
															"children": {
																"K11": {},
																"K12": {}
															}
														},
														"K13": {}
													},
													"order": ["K10", "K13"]
												}
											},
											"order": ["K9, K3"]
										},
										"K14": {
											"children": {
												"K15": {
													"children": {
														"K16": {
															"children": {
																"K17": {},
																"K18": {}
															}
														},
														"K19": {}
													}
												},
												"K20": {}
											}
										}
									},
									"order": ["K14", "K2"]
								},
								"labels": [
									"eka taso", "toka taso", "kolmas taso"
								],
								"uiSchema": {
									"ui:field": "horizontal"
								}
							}
							}
						}
					}
				},
				"units": {
					"ui:field": "unitTripreport",
					"ui:options": {
						"rowAddAmount": 4
					},
					"items": {
						"ui:field": "scoped",
						"ui:options": {
							"uiSchema": {
								"ui:field": "expandable",
								"ui:options": {
									"expanderButtonText": "Näytä lisää muuttujia",
									"contractorButtonText": "Näytä vähemmän muuttujia",
									"uiSchema": {
										"ui:field": "autosuggest",
										"ui:options": {
											"autosuggestField": "taxon",
											"suggestionInputField": "informalNameString",
											"suggestionReceivers": {
												"informalNameString": "value",
												"unitType": "payload.informalGroups.0"
											},
											"uiSchema": {
												"ui:field": "horizontal"
											}
										}
									}
								}
							},
							"fieldScopes": {
								"unitType": {
									"MVL.2": {
										"fields": [
											"age",
											"count",
											"alive",
											"notes"
										],
										"uiSchema": {
											"ui:options": {
												"additionalFields": ["alive", "notes"]
											}
										}
									},
									"MVL.21": {
										"fields": [
											"age",
											"count",
											"alive",
											"notes"
										],
										"uiSchema": {
											"ui:options": {
												"additionalFields": ["notes"]
											}
										}
									},
									"MVL.1": {
										"fields": [
											"age",
											"count",
											"ring",
											"sex",
											"alive",
											"notes"
										],
										"uiSchema": {
											"ui:options": {
												"additionalFields": ["notes"]
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"schema": {
		"type": "object",
		"properties": {
			"editors": {
				"type": "array",
				"title": "Anna käyttäjälle muokkausoikeus?",
				"items": {
					"type": "string"
				}
			},
			"gatherings": {
				"type": "array",
				"items": {
					"title": "Perustiedot",
					"type": "object",
					"properties": {
						"dateBegin": {
							"type": "string",
							"title": "Havaintoaika"
						},
						"dateEnd": {
							"type": "string",
							"title": "Havaintoajan loppu"
						},
						"leg": {
							"type": "array",
							"title": "Havainnoitsijat",
							"items": {
								"type": "string"
							}
						},
						"legPublic": {
							"type": "boolean",
							"title": "Näytetäänkö nimet julkisesti?"
						},
						"units": {
							"type": "array",
							"title": "Havainnot",
							"items": {
								"type": "object",
								"properties": {
									"informalNameString": {
										"type": "string",
										"title": "Taksoni"
									},
									"unitType": {
										"type" : "string"
									},
									"age": {
										"type": "string",
										"title": "Ikä"
									},
									"sex": {
										"type": "string",
										"title": "Sukupuoli",
										"enum": [
											"",
											"MY.sexM",
											"MY.sexF",
											"MY.sexU",
											"MY.sexN",
											"MY.sexX",
											"MY.sexW",
											"MY.sexE",
											"MY.sexC"
										],
										"enumNames": [
											"",
											"M - Male",
											"F - Female",
											"U - Unknown",
											"N - Not applicable",
											"X - miXed",
											"W - Worker",
											"E - multiplE",
											"C - Conflicting"
										]
									},
									"notes": {
										"type": "string",
										"title": "Muistiinpanot"
									},
									"count": {
										"type": "string",
										"title": "Lukumäärä"
									},
									"alive": {
										"type": "boolean",
										"title": "Elossa?"
									},
									"ring": {
										"type": "string",
										"title": "Rengas"
									}
								},
								"required": []
							}
						},
						"image": {
							"type": "string",
							"title": "Raahaa tähän kuvat tai valitse tiedosto koneeltasi [Browse]"
						},
						"rights": {
							"type": "string",
							"title": "Kuivien käyttöoikeus [pakollinen]"
						},
						"wgs84Geometry": {
							"type": "object",
							"properties": {}
						},
						"tree": {
							"type": "string",
							"enum": ["", "K2", "K3", "K4", "K5", "K6", "K7", "K8", "K9", "K10", "K11", "K12", "K13", "K14", "K15", "K16", "K17", "K18", "K19", "K20", "K21", "K22", "K23", "K24", "K25", "K26", "K27", "K28", "K29", "K30", "K31", "K32", "K33", "K34", "K35", "K36", "K37", "K38", "K39", "K40"],
							"enumNames": ["", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40"],
							"title": " "
						}
					},
					"required": [
						"image",
						"dateBegin"
					]
				}
			},
			"temp": {
				"type": "boolean"
			},
			"ready": {
				"type": "boolean"
			}
		}
	},
	"formData": {
		"gatherings": [
			{
				"dateBegin": "2016-05-11T11:08:54.044Z",
				"dateEnd": "",
				"leg": ["MA.3", "b", "c"],
				"legPublic": false,
				"kartta": "",
				"units": [],
				"image": "",
				"rights": "",
				"wgs84Geometry": {
					"type": "Point",
					"coordinates": [
						24.92990638910176,
						60.17085995166927
					]
				}
			},
			{
				"dateBegin": "2016-05-20T11:08:54.044Z",
				"dateEnd": "",
				"leg": ["MA.3"],
				"legPublic": true,
				"kartta": "",
				"units": [],
				"image": "",
				"rights": "",
				"wgs84Geometry": {
					"type": "Point",
					"coordinates": [
						24.934855632550473,
						60.171278498063046
					]
				}
			}
		],
		"temp": false,
		"ready": false,
		"editors": ["MA.3", "c", "d"]
	}
}
